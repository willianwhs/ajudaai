<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cadastro de Prestador ‚Äî AJUDAAI</title>

<style>
body{
  font-family:Arial,Helvetica,sans-serif;
  background:#f4f6f8;
  margin:0;
  padding:20px;
}

.container{
  max-width:500px;
  margin:auto;
  background:#fff;
  padding:25px;
  border-radius:16px;
  box-shadow:0 6px 18px rgba(0,0,0,.08);
}

h2{
  text-align:center;
  margin-bottom:20px;
}

input,button{
  width:100%;
  padding:14px;
  margin-top:10px;
  border-radius:10px;
  border:1px solid #ddd;
  font-size:16px;
}

button{
  background:#FFC107;
  border:none;
  font-weight:bold;
  cursor:pointer;
}

.status{
  text-align:center;
  font-size:14px;
  margin-top:10px;
  color:#555;
}
</style>
</head>

<body>

<div class="container">
<h2>Cadastro de Prestador</h2>

<form id="formCadastro">

<input name="nome" placeholder="Seu nome" required>
<input name="servico" placeholder="Servi√ßo prestado" required>
<input name="cidade" placeholder="Cidade" required>
<input name="whatsapp" placeholder="WhatsApp com DDD" required>

<!-- Campos ocultos GPS -->
<input type="hidden" name="lat" id="lat">
<input type="hidden" name="lng" id="lng">

<button type="submit">Cadastrar</button>

<div class="status" id="status">üìç Obtendo localiza√ß√£o...</div>

</form>
</div>

<script>
const WEBHOOK = "https://hook.us2.make.com/rmdusinc4e6pg1akovep4zrd6rw1fpyw";

const statusTxt = document.getElementById("status");


// üìç CAPTURA GPS AUTOM√ÅTICO
navigator.geolocation.getCurrentPosition(
  pos=>{
    document.getElementById("lat").value = pos.coords.latitude;
    document.getElementById("lng").value = pos.coords.longitude;

    statusTxt.innerHTML = "‚úÖ Localiza√ß√£o capturada automaticamente";
  },
  ()=>{
    statusTxt.innerHTML = "‚ö†Ô∏è N√£o foi poss√≠vel capturar localiza√ß√£o (cadastro ainda funciona)";
  }
);


// üöÄ ENVIO PARA MAKE
document.getElementById("formCadastro").addEventListener("submit", async e=>{
  e.preventDefault();

  const form = new FormData(e.target);

  const dados = {};
  form.forEach((v,k)=>dados[k]=v);

  await fetch(WEBHOOK,{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify(dados)
  });

  statusTxt.innerHTML="‚úÖ Cadastro enviado com sucesso!";
  e.target.reset();
});
</script>

</body>
</html>
