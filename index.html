<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ajudaí</title>  <!-- Leaflet -->  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>  <style>
    :root {
      --azul:#0B5CFF;
      --amarelo:#FFD400;
      --bg:#F7F9FC;
      --card:#FFFFFF;
      --text:#1F2937;
      --radius:18px;
      --shadow:0 10px 25px rgba(0,0,0,.08);
    }

    *{box-sizing:border-box;margin:0;padding:0;font-family:Arial,Helvetica,sans-serif}

    body{background:var(--bg);color:var(--text)}

    header{
      background:var(--azul);
      color:#fff;
      padding:16px 24px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    .logo{font-size:22px;font-weight:bold}

    .btn{
      border:none;
      padding:10px 16px;
      border-radius:10px;
      cursor:pointer;
      font-weight:600;
    }

    .btn-amarelo{background:var(--amarelo)}
    .btn-azul{background:var(--azul);color:#fff}

    .container{max-width:1200px;margin:auto;padding:24px}

    .grid{display:grid;grid-template-columns:1fr 1fr;gap:24px}

    .card{
      background:var(--card);
      border-radius:var(--radius);
      padding:20px;
      box-shadow:var(--shadow);
    }

    #map{height:420px;border-radius:18px}

    input,select{
      width:100%;
      padding:10px;
      margin-top:8px;
      margin-bottom:14px;
      border-radius:10px;
      border:1px solid #ddd;
    }

    .prof-card{
      border:1px solid #eee;
      padding:12px;
      border-radius:12px;
      margin-bottom:10px;
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    footer{
      text-align:center;
      padding:30px;
      color:#777;
    }
  </style></head>
<body><header>
  <div class="logo">Ajudaí</div>
  <div>
    <button class="btn btn-amarelo" onclick="abrirCadastro()">Cadastrar profissional</button>
    <button class="btn btn-azul" onclick="localizarUsuario()">Perto de mim</button>
  </div>
</header><div class="container">  <div class="grid"><div class="card">
  <h2>Profissionais próximos</h2>
  <div id="listaProfissionais"></div>
</div>

<div class="card">
  <h2>Mapa</h2>
  <div id="map"></div>
</div>

  </div>  <div id="cadastro" class="card" style="margin-top:24px;display:none">
    <h2>Cadastro de profissional</h2><input id="nome" placeholder="Nome" />
<input id="categoria" placeholder="Categoria" />
<input id="cidade" placeholder="Cidade" />
<input id="whats" placeholder="WhatsApp" />

<button class="btn btn-azul" onclick="salvarProfissional()">Salvar cadastro</button>

  </div></div><footer>
Ajudaí © plataforma de serviços locais
</footer><script>
let mapa = L.map('map').setView([-23.5505,-46.6333],12);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  maxZoom:19
}).addTo(mapa);

let marcadores = [];

function abrirCadastro(){
  document.getElementById('cadastro').style.display='block';
  window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
}

function salvarProfissional(){
  const nome=document.getElementById('nome').value;
  const categoria=document.getElementById('categoria').value;
  const cidade=document.getElementById('cidade').value;
  const whats=document.getElementById('whats').value;

  if(!nome||!categoria||!whats){
    alert('Preencha os campos');
    return;
  }

  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude;
    const lng=pos.coords.longitude;

    const profissional={nome,categoria,cidade,whats,lat,lng};

    let lista=JSON.parse(localStorage.getItem('profissionais')||'[]');
    lista.push(profissional);
    localStorage.setItem('profissionais',JSON.stringify(lista));

    alert('Cadastro salvo');
    carregarProfissionais();
  });
}

function carregarProfissionais(){
  let lista=JSON.parse(localStorage.getItem('profissionais')||'[]');
  const div=document.getElementById('listaProfissionais');
  div.innerHTML='';

  marcadores.forEach(m=>mapa.removeLayer(m));
  marcadores=[];

  lista.forEach(p=>{
    const el=document.createElement('div');
    el.className='prof-card';
    el.innerHTML=`
      <div>
        <strong>${p.nome}</strong><br>
        ${p.categoria}
      </div>
      <button class="btn btn-amarelo" onclick="contato('${p.whats}')">WhatsApp</button>
    `;
    div.appendChild(el);

    const marker=L.marker([p.lat,p.lng]).addTo(mapa)
      .bindPopup(`<b>${p.nome}</b><br>${p.categoria}<br><a target="_blank" href="https://wa.me/55${p.whats}">WhatsApp</a>`);

    marcadores.push(marker);
  });
}

function contato(num){
  window.open(`https://wa.me/55${num}`,'_blank');
}

function localizarUsuario(){
  navigator.geolocation.getCurrentPosition(pos=>{
    const lat=pos.coords.latitude;
    const lng=pos.coords.longitude;
    mapa.setView([lat,lng],14);
    L.marker([lat,lng]).addTo(mapa).bindPopup('Você está aqui').openPopup();
  });
}

carregarProfissionais();
</script></body>
</html>
