<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AJUDA AI</title>

<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>

<style>
:root{
--azul:#0B5FFF;
--azulEsc:#002C5B;
--amarelo:#FFB400;
--borda:#E6E9EF;
--cinza:#F5F7FA;
}

*{box-sizing:border-box}
body{margin:0;font-family:Inter,Arial;background:#fff;color:#333}

.container{max-width:1200px;margin:auto;padding:0 16px}

/* NAV */
header{background:#fff;border-bottom:1px solid var(--borda);position:sticky;top:0;z-index:10}
.nav{display:flex;justify-content:space-between;align-items:center;height:64px}
.logo{font-weight:800;color:var(--azul);font-size:20px}
.menu a{margin-left:20px;text-decoration:none;color:#333;font-weight:500}

/* HERO */
.hero{background:linear-gradient(135deg,var(--azul),var(--azulEsc));color:#fff;padding:60px 0;text-align:center}
.hero h1{margin:0 0 10px;font-size:34px}
.search{display:flex;max-width:600px;margin:20px auto;background:#fff;border-radius:12px;overflow:hidden}
.search input{flex:1;border:none;padding:14px}
.search button{background:var(--amarelo);border:none;padding:0 24px;font-weight:700}

/* CATEGORIAS */
.categories{background:var(--cinza);padding:40px 0}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:16px}
.cat{background:#fff;border:1px solid var(--borda);border-radius:12px;padding:16px;text-align:center}

/* FEED */
.feed{padding:40px 0}
.card{border:1px solid var(--borda);border-radius:12px;padding:14px;margin-bottom:12px}

/* MAP */
.mapWrap{padding:40px 0}
#map{height:380px;border-radius:12px;border:1px solid var(--borda)}

/* CTA */
.cta{background:var(--azul);color:#fff;text-align:center;padding:40px 0}
.btn{background:var(--amarelo);border:none;padding:12px 18px;border-radius:10px;font-weight:700;cursor:pointer}

/* MODAL */
.modalBg{position:fixed;inset:0;background:rgba(0,0,0,.4);display:none;align-items:center;justify-content:center;z-index:100}
.modal{background:#fff;border-radius:12px;padding:20px;width:100%;max-width:400px}
.modal input{width:100%;padding:10px;margin-bottom:10px;border:1px solid var(--borda);border-radius:8px}

@media(max-width:768px){
.hero h1{font-size:26px}
.search{flex-direction:column}
.search button{width:100%;padding:12px}
}
</style>
</head>

<body>

<header>
<div class="container nav">
<div class="logo">AJUDA AI</div>
<div class="menu">
<a href="#">Serviços</a>
<a href="#">Como funciona</a>
<a href="#" onclick="openModal()">Cadastrar prestador</a>
</div>
</div>
</header>

<section class="hero">
<div class="container">
<h1>Encontre profissionais perto de você</h1>
<div class="search">
<input placeholder="Qual serviço você precisa?">
<button>Buscar</button>
</div>
</div>
</section>

<section class="categories">
<div class="container">
<div class="grid">
<div class="cat">Reformas</div>
<div class="cat">Elétrica</div>
<div class="cat">Limpeza</div>
<div class="cat">Eventos</div>
<div class="cat">Aulas</div>
</div>
</div>
</section>

<section class="feed">
<div class="container">
<h2>Profissionais</h2>
<div id="prestadores"></div>
</div>
</section>

<section class="mapWrap">
<div class="container">
<h2>Perto de você</h2>
<div id="map"></div>
</div>
</section>

<section class="cta">
<div class="container">
<h2>É profissional?</h2>
<button class="btn" onclick="openModal()">Cadastrar grátis</button>
</div>
</section>

<!-- MODAL -->
<div class="modalBg" id="modal">
<div class="modal">
<h3>Cadastro de prestador</h3>
<form id="formPrestador">
<input id="nome" placeholder="Nome" required>
<input id="servico" placeholder="Serviço" required>
<input id="cidade" placeholder="Cidade" required>
<input id="whatsapp" placeholder="WhatsApp" required>
<button class="btn" type="submit">Enviar</button>
</form>
</div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
function openModal(){modal.style.display="flex"}
function closeModal(){modal.style.display="none"}

/* MAP */
const map=L.map('map').setView([-22.75,-47.33],10)
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map)

/* VALIDAR LAT LNG */
function latLngValido(lat,lng){
return lat>=-90 && lat<=90 && lng>=-180 && lng<=180
}

/* CARREGAR PRESTADORES */
async function carregar(){
const url="https://opensheet.elk.sh/1ImYSb5Cih3eGu7jqU3zjLTbvNvGTuhGjeTKSTo5_j7M/Pagina1"
const res=await fetch(url)
const data=await res.json()

prestadores.innerHTML=""

data.forEach(p=>{
const lat=parseFloat(p.lat)
const lng=parseFloat(p.lng)

const card=document.createElement("div")
card.className="card"
card.innerHTML=`<b>${p.nome||"Sem nome"}</b><br>${p.servico||""} • ${p.cidade||""}`
prestadores.appendChild(card)

if(latLngValido(lat,lng)){
L.marker([lat,lng]).addTo(map).bindPopup(p.nome)
}
})
}

carregar()

/* ENVIO AO FORMS REAL */
formPrestador.addEventListener("submit",e=>{
e.preventDefault()

const formURL="https://docs.google.com/forms/d/e/1FAIpQLSf8J459p0bqDGLWIOO7lEAYP4brd44-j-073lC4FJNxAgPjVA/formResponse"

const data=new FormData()
data.append("entry.1030652642",nome.value)
data.append("entry.564738291",servico.value)
data.append("entry.918273645",cidade.value)
data.append("entry.192837465",whatsapp.value)

fetch(formURL,{method:"POST",mode:"no-cors",body:data})

alert("Cadastro enviado!")
closeModal()
})
</script>

</body>
</html>
